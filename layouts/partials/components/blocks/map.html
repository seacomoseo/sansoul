{{- with .map -}}
  {{- $geo := dict -}}
  {{- if reflect.IsMap . -}}
    {{- $geo = . -}}
  {{- else -}}
    {{- $geo = unmarshal . -}}
  {{- end -}}
  {{ $icon  := $.licon | default $.icon | default "circle-star" }}
  {{ $color := $.icon_color | default "main" }}
  {{ $zoom  := $.zoom | default 15 }}
  <div
    id="map-{{ $.id | default $.section.id }}"
    class="map box__block bg-light {{ $color }}"
    data-y="{{ index $geo.coordinates 0 }}"
    data-x="{{ index $geo.coordinates 1 }}"
    data-icon="{{ $icon }}"
    data-zoom="{{ $zoom }}"
  ></div>
  {{ partial "components/icon" (dict "class" "leaflet-data-marker__svg hide" "icon" $icon) }}
{{- end -}}
