{{- $vars := dict -}}
{{- with site.Data -}}
  {{- $vars = dict
    "styles-colors-base-white"           (.styles.colors.base.white               | default "#fff")
    "styles-colors-base-light"           (.styles.colors.base.light               | default "#eee")
    "styles-colors-base-dark"            (.styles.colors.base.dark                | default "#282525")
    "styles-colors-base-black"           (.styles.colors.base.black               | default "#000")
    "styles-colors-base-grey"            (.styles.colors.base.grey                | default "#767676")
    "styles-colors-main-color"           (.styles.colors.main.color               | default "#577399")
    "styles-colors-alt-color"            (.styles.colors.alt.color                | default "")
    "styles-colors-link-color"           (.styles.colors.link.color               | default .styles.colors.main.color | default "#577399")

    "styles-colors-main-light"           (.styles.colors.main.light               | default "")
    "styles-colors-alt-light"            (.styles.colors.alt.light                | default "")
    "styles-colors-link-light"           (.styles.colors.link.light               | default "")

    "styles-colors-main-dark"            (.styles.colors.main.dark                | default "")
    "styles-colors-alt-dark"             (.styles.colors.alt.dark                 | default "")
    "styles-colors-link-dark"            (.styles.colors.link.dark                | default "")

    "styles-colors-main-contrast-text"   (or (in (slice "all" "text") .styles.colors.main.contrast) (not .styles.colors.main.contrast) | not | not | string)
    "styles-colors-alt-contrast-text"    (or (in (slice "all" "text") .styles.colors.alt.contrast ) (not .styles.colors.alt.contrast)  | not | not | string)
    "styles-colors-link-contrast-text"   (or (in (slice "all" "text") .styles.colors.link.contrast) (not .styles.colors.link.contrast) | not | not | string)

    "styles-colors-main-contrast-bg"     (or (in (slice "all" "bg")   .styles.colors.main.contrast) (not .styles.colors.main.contrast) | not | not | string)
    "styles-colors-alt-contrast-bg"      (or (in (slice "all" "bg")   .styles.colors.alt.contrast ) (not .styles.colors.alt.contrast)  | not | not | string)
    "styles-colors-link-contrast-bg"     (or (in (slice "all" "bg")   .styles.colors.link.contrast) (not .styles.colors.link.contrast) | not | not | string)

    "styles-fonts-base-family"           (.styles.fonts.base.family               | default "Arial")
    "styles-fonts-title-family"          (.styles.fonts.title.family              | default "Arial")
    "styles-fonts-cursive-family"        (.styles.fonts.cursive.family            | default "Arial")
    "styles-fonts-base-weight"           (.styles.fonts.base.weight               | default 200)
    "styles-fonts-title-weight"          (.styles.fonts.title.weight              | default 800)
    "styles-fonts-cursive-weight"        (.styles.fonts.cursive.weight            | default 400)
    "styles-fonts-base-bold"             (.styles.fonts.base.bold                 | default 0)
    "styles-fonts-title-bold"            (.styles.fonts.title.bold                | default 0)
    "styles-fonts-cursive-bold"          (.styles.fonts.cursive.bold              | default 0)
    "styles-fonts-base-italic"           (cond (not .styles.fonts.base.italic)    "normal" "italic")
    "styles-fonts-title-italic"          (cond (not .styles.fonts.title.italic)   "normal" "italic")
    "styles-fonts-cursive-italic"        (cond (not .styles.fonts.cursive.italic) "normal" "italic")
    "styles-fonts-base-line-height"      (.styles.fonts.base.line_height          | default 1.25)
    "styles-fonts-title-line-height"     (.styles.fonts.title.line_height         | default 1.25)
    "styles-fonts-cursive-line-height"   (.styles.fonts.cursive.line_height       | default 1.25)
    "styles-fonts-title-size"            (.styles.fonts.title.size                | default 1)
    "styles-fonts-cursive-size"          (.styles.fonts.cursive.size              | default 1)
    "styles-fonts-title-top"             (.styles.fonts.title.top                 | default 0)
    "styles-fonts-cursive-top"           (.styles.fonts.cursive.top               | default 0)
    "styles-fonts-blockquote_cursive"    (.styles.fonts.blockquote_cursive        | not | not | string)

    "styles-emoji-duotone"               (eq .styles.icons.type   "duotone"       | not | not | string)
    "styles-emoji-scale"                 (in .styles.icons.emojis "-scale"        | not | not | string)
    "styles-menu-bar"                    (cond (eq .styles.icons.type "thin"   ) .1
                                         (cond (eq .styles.icons.type "light"  ) .15
                                         (cond (eq .styles.icons.type "regular") .2
                                                                                 .25
                                         )))

    "styles-rounded-radius"              (.styles.rounded.radius                  | default 0)
    "styles-rounded-chamfer"             (.styles.rounded.chamfer                 | not | not | string)

    "styles-buttons-sides_round"         (.styles.buttons.sides_round             | not | not | string)
    "styles-buttons-icon_circle"         (.styles.buttons.icon_circle             | not | not | string)
    "styles-buttons-deep"                (.styles.buttons.deep                    | not | not | string)
    "styles-buttons-outline"             (.styles.buttons.outline                 | not | not | string)
    "styles-buttons-font_main"           (.styles.buttons.font_main.type          | default "base")
    "styles-buttons-font_main_bold"      (.styles.buttons.font_main.bold          | not | not | string)
    "styles-buttons-font_main_uppercase" (.styles.buttons.font_main.uppercase     | not | not | string)
    "styles-buttons-font_alt"            (.styles.buttons.font_alt.type           | default "base")
    "styles-buttons-font_alt_bold"       (.styles.buttons.font_alt.bold           | not | not | string)
    "styles-buttons-font_alt_uppercase"  (.styles.buttons.font_alt.uppercase      | not | not | string)

    "styles-shadow-left"                 (.styles.shadow.left                     | default 0)
    "styles-shadow-top"                  (.styles.shadow.top                      | default 0)
    "styles-shadow-blur"                 (.styles.shadow.blur                     | default 0)
    "styles-shadow-color"                (.styles.shadow.color                    | default "black")
    "styles-shadow-alpha"                (.styles.shadow.alpha                    | default 0)
    "config-others-show"                 (.config.others.show                     | not | not | string)
    "menu-google_translate"              (site.Params.google_translate            | not | not | string)
    "timestamp"                          site.Params.timestamp
    -}}
{{- end -}}

{{- $css := resources.Get (print "css/styles.scss") -}}
{{- with $css -}}
  {{- $css = . | toCSS (dict "vars" $vars "enableSourceMap" (not hugo.IsProduction)) -}}
  {{- if hugo.IsProduction -}}
    {{/*  {{- $css = $css | minify | postCSS | resources.PostProcess -}}  */}}
    {{- $css = $css | minify -}}
  {{- end -}}
  {{- $css = $css | fingerprint -}}
{{- end -}}

<link rel="stylesheet" href="{{ $css.RelPermalink }}">