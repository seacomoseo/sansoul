{{ $schemas := slice
  (partial "components/base/schema/website" .)
  (partial "components/base/schema/page" .)
  (partial "components/base/schema/image" .)
  (partial "components/base/schema/organization" .)
  (partial "components/base/schema/breadcrumbs" .)
}}

{{ if in (slice "article" "event" "product" "person" "service") .Params.base }}
  {{ $schemas = $schemas | append (partial (print "components/base/schema/" .Params.base) .) }}
{{ end }}

{{ $schema := dict 
  "@context" "http://schema.org"
  "@graph"   $schemas
}}

{{ $opts  := cond hugo.IsProduction dict (dict "prefix" "" "indent" "  ") }}
{{ $schema = $schema | jsonify $opts }}

{{ return $schema }}