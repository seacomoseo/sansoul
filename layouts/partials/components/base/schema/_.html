{{ $schemas := slice
  (partial "components/base/schema/website" .)
  (partial "components/base/schema/page" .)
  (partial "components/base/schema/image" .)
  (partial "components/base/schema/organization" site.Data.schema)
  (partial "components/base/schema/breadcrumbs" .)
}}

{{ if not .IsSection }}
  {{ if in (slice "article" "event" "product" "brand" "author" "service" "organization") .Params.base }}
    {{ $schemas = $schemas | append (partial (print "components/base/schema/" .Params.base) .) }}
  {{ end }}
{{ end }}

{{ $schema := dict 
  "@context" "http://schema.org"
  "@graph"   $schemas
}}

{{ $opts  := cond hugo.IsProduction dict (dict "prefix" "" "indent" "  ") }}
{{ $schema = $schema | jsonify $opts }}

{{ return $schema }}