{{ $items := slice }}

{{ if page.IsTranslated }}
  {{ $langs  := slice }}
  {{ $label  := print page.Lang (partial "components/icon" (dict "class" "langs__drop" "icon" (print "angle-" (cond (not $.up) "down" "up")))) }}
  {{ range page.AllTranslations }}
    {{ $langs = $langs | append (dict
      "link"     .RelPermalink
      "icon"     (print "flag-" .Lang)
      "emoji"    (i18n "flag")
      "label"    .Language.LanguageName
      "title"    (print .Language.LanguageName ": " .Title)
      "ofuscate" true
      "lang"     .Lang
    ) }}
  {{ end }}
  {{ $items = $items | append (dict
    "icon"  $.icon
    "emoji" "üåê"
    "label" $label
    "items" $langs
  ) }}
{{ end }}

{{ return $items }}