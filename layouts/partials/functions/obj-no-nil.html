{{ $obj := dict }}

{{ $s := newScratch }}
{{ $s.Set "filtered" (dict) }}
{{ range $k, $v := . }}
  {{ if ne $v nil }}
    {{ $s.SetInMap "filtered" $k $v }}
  {{ end }}
{{ end }}
{{ $obj = $s.Get "filtered" }}

{{ return $obj }}