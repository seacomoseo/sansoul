{{ $result := dict }}
{{ $url    := . }}
{{ $opts   := dict }}
{{ if reflect.IsMap . }}
  {{ $url   = .url }}
  {{ $o    := dict "dict" . "params" "url" }}
  {{ $opts  = partial "functions/delete-params" $o }}
{{ end }}

{{ with try (resources.GetRemote $url $opts) }}
  {{ with .Err }}
    {{ warnf "%s" . }}
  {{ else with .Value }}
    {{ $result = . }}
  {{ else }}
    {{ warnf "Unable to get remote resource %q" $url }}
  {{ end }}
{{ end }}

{{ return $result }}