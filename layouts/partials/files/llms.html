{{/*  DEFINES  */ -}}

{{ define "partials/llms-pages" -}}
  {{ $pages := slice }}
  {{ if not .Params.llms.hide -}}
    {{ range .RegularPages }}
      {{ $add_page := and
        (ne .Params.hide true)
        (ne .Params.seo.noindex true)
        (ne .Params.llms.hide true)
        | or (eq .Params.llms.hide false)
      }}
      {{ if $add_page }}
        {{ $pages = $pages | append . }}
      {{ end }}
    {{ end }}
    {{ if eq .Type "single" }}
      {{ $pages = slice site.Home | append $pages }}
    {{ end }}
  {{ end }}
  {{ return $pages }}
{{ end -}}

{{ define "partials/llms-parent-link" -}}
  {{ if .Params.seo.noindex -}}
    {{ or .Params.llms.title .Title -}}
  {{ else -}}
    {{ partial "llms-link" . -}}
  {{ end -}}
{{ end -}}

{{ define "partials/llms-link" -}}
  [{{ or .Params.llms.title .Title }}]({{ .Permalink }})
  {{- partial "llms-langs" . -}}
{{ end -}}

{{ define "partials/llms-langs" }}
  {{ $langs := slice }}
  {{ with .Translations }}
    {{ range . }}
      {{ $lang := print "[" .Lang "](" .Permalink ")" }}
      {{ $langs = $langs | append $lang }}
    {{ end }}
  {{ end }}
  {{ with $langs }}
    {{ $langs = delimit $langs ", " }}
    {{ $langs = print " [" $langs "]" }}
  {{ else }}
    {{ $langs = "" }}
  {{ end }}
  {{ return $langs }}
{{ end -}}

{{ define "partials/llms-site-desc" -}}
  {{ or
    site.Params.llms.desc
    site.Params.seo.desc
    site.Home.Params.llms.desc
    site.Home.Params.seo.desc
    site.Home.Params.sum
    site.Home.Summary
    | plainify
    | replaceRE "\n\n" "\n\n> "
    | replaceRE `::.+?::` ""
    | safeHTML
  -}}
{{ end -}}

{{ define "partials/llms-parent-desc" -}}
  {{ or
    .Params.llms.desc
    .Params.seo.desc
    .Params.sum
    .Summary
    | plainify
    | replaceRE "\n\n" "\n\n> "
    | replaceRE `::.+?::` ""
    | safeHTML
  }}
{{ end -}}

{{ define "partials/llms-desc" -}}
  {{ or
    .Params.llms.desc
    .Params.seo.desc
    .Params.sum
    .Summary
    | plainify
    | replaceRE "\n" " "
    | replaceRE `::.+?::` ""
  -}}
{{ end -}}

{{/*  PRINT  */ -}}

# {{ or site.Params.llms.title site.Title }}

> {{ partial "llms-site-desc" . -}}

{{ range site.Sections -}}
{{ $pages := partial "llms-pages" . }}
{{ if $pages }}


## {{ partial "llms-parent-link" . }}

> {{ partial "llms-parent-desc" . -}}

{{ range $pages }}
- {{ partial "llms-link" . }}: {{ partial "llms-desc" . -}}
{{ end -}}

{{ end -}}
{{ end -}}

{{- /*  CUSTOM  */ -}}
{{- $file := resources.Get "llms.txt" -}}
{{- with $file.Content }}

---

{{ $file.Content -}}
{{ end -}}