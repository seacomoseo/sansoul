{{ $t := partial "functions/i18n" . }}

{{ $default := dict }}
{{ with readFile "./themes/sansoul/hugo.default.yml" }}
  {{ with unmarshal . }}
    {{ $default = .languages }}
  {{ end }}
{{ end }}

{{ $type_files := slice }}
{{ range slice
  "pages"
  "blog"
  "events"
  "products"
  "categories"
  "tags"
  "authors"
}}
  {{ $lang       := index $default page.Lang }}
  {{ $permalinks := $lang.permalinks }}
  {{ $type_files = $type_files | append (dict
    "label"     (index $t (print "collection_" .))
    "name"      .
    "widget"    `object`
    "required"  false
    "collapsed" true
    "fields"    (slice
      (dict "label" $t.collection_p_title      "name" `title`     "widget" `string` "i18n" true "required" false)
      (dict "label" $t.collection_p_title_seo  "name" `title_seo` "widget" `string` "i18n" true "required" false "hint" $t.collection_p_title_seo_hint)
      (dict
        "label"    $t.collection_settings_config_types_slug
        "name"     `slug`
        "widget"   `string`
        "required" false
        "hint"     (print $t.collection_settings_config_types_slug_hint " ðŸ”· " $t.default ": **" (index $permalinks.section .) "**")
      )
      (dict
        "label"    $t.collection_settings_config_types_permalinks
        "name"     `permalinks`
        "widget"   `string`
        "required" false
        "hint"     (print $t.collection_settings_config_types_permalinks_hint " ðŸ”· " $t.default ": **" (index $permalinks.page .) "**")
      )
      (dict "label" $t.collection_p_description "name" `description` "widget" `text`     "i18n" true        "required" false         "hint" $t.collection_p_description_hint)
      (dict "label" $t.collection_p_image       "name" `image`       "widget" `image`    "i18n" `duplicate` "required" false      "choose_url" true  "max_file_size" 512000000 "hint" $t.collection_p_image_hint)
      | append
      (cond
        (eq "pages" .)
        slice
        (dict "label" $t.collection_p_draft     "name" `draft`       "widget" `boolean`  "i18n" true        "required" false         "hint" $t.collection_settings_config_types_draft_hint)
      )
      | append
      (dict "label" $t.collection_p_noindex     "name" `noindex`     "widget" `boolean`  "i18n" true        "required" false         "hint" $t.collection_p_noindex_hint)
      `~P_BODY`
      (dict "<<" (slice (dict "label" $t.collection_settings_config_types_template "hint" $t.collection_settings_config_types_template_hint) `~P_TEMPLATE`))
    )
  ) }}
{{ end }}
{{ return dict "&SETTINGS_CONFIG_TYPES" $type_files }}