{{ block "none" . }}{{ end -}}
<!DOCTYPE html>
<html lang="{{ .Lang }}">

  {{- $tpl := partial "functions/tpl-sections" . -}}

  {{- /*  Set contact phones page store from contact to callnow  */ -}}
  {{- page.Store.Set "phones" slice -}}

  {{- /*  CUSTOM HTML HEAD  */ -}}
  {{- $custom_html_head  := "" -}}
  {{- with site.Params.html.head -}}
    {{- $path            := print "aux_html_head." $.Lang -}}
    {{- $custom_html_head = . | resources.FromString $path | resources.ExecuteAsTemplate $path $.Page -}}
    {{- $custom_html_head = $custom_html_head.Content | safeHTML -}}
  {{- end -}}

  {{- /*  CUSTOM HTML BODY  */ -}}
  {{- $custom_html_body  := "" -}}
  {{- with site.Params.html.body -}}
    {{- $path            := print "aux_html_body." $.Lang -}}
    {{- $custom_html_body = . | resources.FromString $path | resources.ExecuteAsTemplate $path $.Page -}}
    {{- $custom_html_body = $custom_html_body.Content | safeHTML -}}
  {{- end -}}

  {{- /*  BODY ID  */ -}}
  {{- $body_id := "" -}}
  {{- if .IsHome -}}
    {{- $body_id = "home" -}}
  {{- else if .IsSection -}}
    {{- $body_id = .Type -}}
  {{- else if eq .Kind "404" -}}
    {{- $body_id = 404 -}}
  {{- else -}}
    {{- $body_id = .File.TranslationBaseName -}}
    {{- if ne .Type "single" -}}
      {{- $body_id = print .Type "-" $body_id -}}
    {{- end -}}
  {{- end -}}
  {{- $body_id = print "body-" $body_id -}}

  {{- /*  BODY MENU CLASS  */ -}}
  {{- $menu := $tpl.menu -}}
  {{- $body_menu             := "" -}}
  {{- $body_menu_logo        := "" -}}
  {{- $body_menu_sticky      := "" -}}
  {{- $body_menu_logo_sticky := "" -}}
  {{- $body_menu_transparent := "" -}}
  {{- $body_menu_sections    := "" -}}
  {{- with $menu -}}
    {{- if not .hide -}}
      {{- $body_menu             = "body-menu" -}}
      {{- with .sticky -}}
        {{- if ne . "none" -}}
          {{- $body_menu_sticky = print "body-menu--sticky body-menu--sticky--" . -}}
        {{- end -}}
      {{- end -}}
    {{- end -}}
    {{- if or (not .hide) .logo -}}
      {{- $body_menu_transparent = cond (not .transparent) "" "body-menu--transparent" -}}
    {{- end -}}
    {{- if .logo -}}
      {{- $body_menu_logo        = "body-menu--logo" -}}
      {{- $body_menu_logo_sticky = cond (not .logo_sticky) "" "body-menu--logo--sticky" -}}
    {{- end -}}
  {{- end -}}

  {{- /*  BODY CLASS  */ -}}
  {{- $body_class := slice
    (print "kind-" .Kind)
    (print "type-" .Type)
    (print "base-" .Params.base)
    "body-top"
    $body_menu
    $body_menu_logo
    $body_menu_sticky
    $body_menu_logo_sticky
    $body_menu_transparent
    $body_menu_sections
  -}}

  {{- /*  BODY ATTRIBUTES  */ -}}
  {{- $back_color := $tpl.back.color | default "light" -}}
  {{- $back_base  := dict "is_bg" true "color" $back_color "tpl" $tpl -}}
  {{- $back       := merge $tpl.back $back_base -}}
  {{- $back_attr  := dict "id" $body_id "body_class" $body_class -}}
  {{- $merge_attr := merge $back $back_attr -}}
  {{- $body_attr  := partial "sections/attr" $merge_attr -}}

  {{- /*  SECTIONS  */ -}}
  {{- $sections_all := slice -}}
  {{- $sections     := slice -}}
  {{- $footer       := dict -}}
  {{- with $tpl -}}
    {{- $sections_all = partial "sections/items" . -}}
  {{- end -}}
  {{- with $sections_all -}}
    {{- $sections    = where . "id" "ne" "footer" -}}
    {{- $footer      = index (last 1 .) 0 -}}
  {{- end -}}

  {{- /*  HEAD  */}}
  <head>
    {{- partial "head" . -}}
    {{- $custom_html_head }}
  </head>

  {{- /*  BODY  */}}
  <body {{- $body_attr }}>

    {{- /*  BACKGROUND  */ -}}
    {{- partial "back" $back -}}

    {{- /*  LOGO  */ -}}
    {{- partial "logo" $tpl -}}

    {{- /*  MENU  */ -}}
    {{- partial "menu/_" $tpl -}}

    {{- /*  MAIN  */}}
    <main>
      {{- range $sections -}}
        {{- /* SECTION  */ -}}
        {{- partial "sections/item" . -}}
        {{- /*  MODALS  */ -}}
        {{- range .modals -}}
          {{- partial "sections/item" . -}}
        {{- end -}}
      {{- end }}
    </main>

    {{- /*  FOOTER  */ -}}
    {{- partial "sections/item" $footer -}}

    {{- /*  PRE BODY END  */ -}}
    {{- partial "cookies" $tpl         -}}
    {{- partial "callnow" $tpl.callnow -}}
    {{- partial "up"      .            -}}
    {{- $js := partial "scripts" . }}
    <script src="{{ $js.RelPermalink }}" defer></script>
    {{- $custom_html_body }}
  </body>
</html>